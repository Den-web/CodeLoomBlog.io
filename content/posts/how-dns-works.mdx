---
title: "DNS (Domain Name System) in Detail"
description: "System that translates **domain names** into **IP addresses** needed to establish a connection between a client and a server"
date: "2025-02-17"
---

# **DNS (Domain Name System) in Detail** üåçüöÄ  

## **1. What is DNS?**  
**DNS (Domain Name System)** is a system that translates **domain names** (e.g., `google.com`) into **IP addresses** (e.g., `142.250.74.238`) needed to establish a connection between a client and a server.  

üîπ **Why is DNS needed?**  
Instead of memorizing IP addresses, users enter easy-to-remember **human-friendly** names, and DNS automatically performs the translation (resolution).  

---  

## **2. How Does a DNS Query Work?** üîÑ  
When you enter `google.com` in your browser, DNS goes through **four lookup stages**:  

### **1. Checking Local Cache**  
The browser and operating system first check if the IP address for `google.com` is already cached.  

### **2. Querying the Recursive DNS Resolver**  
If the IP is not found in the cache, the request is sent to a **recursive DNS server** (usually provided by the ISP, or services like Google DNS `8.8.8.8`, Cloudflare `1.1.1.1`).  

### **3. Hierarchical DNS Lookup**  
The DNS server performs sequential queries:  
1. **Root servers** (`.`) ‚Üí Directs the query to the `.com` server.  
2. **TLD servers** (`.com`) ‚Üí Directs the query to `google.com`'s name server.  
3. **Authoritative server for `google.com`** ‚Üí Returns the final IP address.  

### **4. Returning the IP Address**  
The recursive resolver receives the IP, caches it, and sends it to the browser, which then establishes a connection with the server.  

---  

## **3. Types of DNS Queries** üïµÔ∏è‚Äç‚ôÇÔ∏è  
- **Recursive** ‚Äì The server continues querying until it finds the IP.  
- **Iterative** ‚Äì The server returns the closest available data but does not query further.  

---  

## **4. Main Types of DNS Records** üìå  
DNS stores not only IP addresses but also other important records.  

| **Type**  | **Description** | **Example** |  
|----------|-------------|------------|  
| `A` | IPv4 address of a domain | `google.com ‚Üí 142.250.74.238` |  
| `AAAA` | IPv6 address of a domain | `google.com ‚Üí 2607:f8b0::200e` |  
| `CNAME` | Alias (redirection) | `www.example.com ‚Üí example.com` |  
| `MX` | Mail servers | `mail.example.com ‚Üí 10.20.30.40` |  
| `TXT` | Text data (SPF, DKIM, domain verification) | `example.com ‚Üí "v=spf1 include:_spf.google.com ~all"` |  
| `NS` | Specifies authoritative DNS servers | `example.com ‚Üí ns1.dnsprovider.com` |  
| `SRV` | Defines services (e.g., SIP, XMPP) | `_sip._tcp.example.com` |  
| `PTR` | Reverse lookup (IP ‚Üí Domain) | `40.30.20.10 ‚Üí mail.example.com` |  

---  

## **5. DNS Caching and TTL (Time To Live)**  
DNS records are not queried every time; they are cached at different levels:  

- **Browser** (Chrome, Firefox) ‚Äì stores cache **for a few minutes**.  
- **OS (Windows, macOS, Linux)** ‚Äì stores cache **for several hours**.  
- **Intermediate DNS servers** (ISPs) ‚Äì cache records **according to TTL**.  

### **How to Check DNS Cache?**  
```sh
# Windows
ipconfig /displaydns

# macOS
sudo killall -HUP mDNSResponder && sudo dscacheutil -flushcache

# Linux
systemd-resolve --statistics
```  

### **How to Check a Domain‚Äôs TTL?**  
```sh
nslookup -type=a google.com
```
OR  
```sh
dig google.com +noall +answer
```  
üëâ **TTL = 300** means the record will be cached for 5 minutes.  

---  

## **6. DNS Issues and Their Solutions**  

### **1. "DNS_PROBE_FINISHED_NXDOMAIN"**  
‚ùå **Error:** Domain name not found.  
‚úÖ **Solution:**  
- Check if the domain name is entered correctly.  
- Flush the DNS cache (`ipconfig /flushdns`).  
- Use a **different DNS server** (`8.8.8.8`, `1.1.1.1`).  

---  

### **2. DNS Record Not Updating**  
‚ùå **Error:** DNS changes are not taking effect.  
‚úÖ **Solution:**  
- Wait **up to 48 hours** (due to caching).  
- Force clear the DNS cache (`flushdns`).  
- Use `nslookup` or `dig` to check new values.  

---  

### **3. Slow Domain Resolution**  
‚ùå **Error:** Slow DNS response time.  
‚úÖ **Solution:**  
- Use **faster DNS servers** (Google, Cloudflare).  
- Check `TTL` and lower it before updating records.  
- Check for **ISP (provider) issues**.  

---  

## **7. Fast Public DNS Servers (Alternatives to ISP DNS)**  

| **Provider** | **IPv4** | **IPv6** | **Features** |  
|--------------|---------|---------|------------|  
| **Google** | `8.8.8.8`, `8.8.4.4` | `2001:4860:4860::8888` | Fast, stable |  
| **Cloudflare** | `1.1.1.1`, `1.0.0.1` | `2606:4700:4700::1111` | Fastest (1ms response) |  
| **OpenDNS** | `208.67.222.222` | `2620:0:ccc::2` | Parental control |  
| **Quad9** | `9.9.9.9` | `2620:fe::fe` | Security, phishing protection |  

üìå **How to Change DNS in the System?**  
1. **Windows**: Control Panel ‚Üí Network Connections ‚Üí IPv4 Properties.  
2. **macOS**: System Preferences ‚Üí Network ‚Üí Advanced ‚Üí DNS.  
3. **Linux**: Edit `/etc/resolv.conf`.  

---  

## **8. DNS over HTTPS (DoH) and DNS over TLS (DoT)**  
üîí Regular DNS queries are **unencrypted**, allowing ISPs to track them.  

‚úÖ **Solution**:  
- **DNS over HTTPS (DoH)** ‚Äì Encrypts DNS queries via HTTPS.  
- **DNS over TLS (DoT)** ‚Äì Encrypts DNS at the TCP level.  

üìå **How to Enable DoH?**  
- **Google Chrome**: Enable "Secure DNS" in settings.  
- **Firefox**: Enable DoH in settings ‚Üí **Cloudflare DNS**.  
- **Android**: Use **1.1.1.1 App** by Cloudflare.  

---  

## **9. DNS vs. CDN (Cloudflare, Akamai, AWS Route 53)**  
Many companies use **CDNs (Content Delivery Networks)** to speed up website loading.  

‚úÖ **CDNs use Anycast DNS**, allowing queries to be directed to **the nearest server** instead of a single fixed IP.  

**Example with `dig`:**  
```sh
dig google.com
```
üëâ Google will return **different IP addresses depending on your location**.  

---  

## **10. Conclusion**  
‚úÖ **DNS is the "address book of the internet," translating domains into IP addresses.**  
‚úÖ **The browser's Event Loop can be affected by DNS queries if caching is not used.**  
‚úÖ **Cloudflare `1.1.1.1` and Google `8.8.8.8` are the best ISP DNS alternatives.**  
‚úÖ **Use DNS over HTTPS (DoH) to protect against query interception.**  